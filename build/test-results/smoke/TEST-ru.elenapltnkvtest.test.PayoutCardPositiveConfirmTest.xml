<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="ru.elenapltnkvtest.test.PayoutCardPositiveConfirmTest" tests="1" skipped="0" failures="0" errors="0" timestamp="2024-07-18T10:27:57" hostname="user" time="15.888">
  <properties/>
  <testcase name="Проверка успешного платежа" classname="ru.elenapltnkvtest.test.PayoutCardPositiveConfirmTest" time="15.888"/>
  <system-out><![CDATA[Request URI:	https://api.yookassa.ru/v3/payments
Headers:		Idempotence-Key=2cdd638d-59ff-4f59-bb58-8d93170c6563
				Authorization=Basic MzU5MjQwOnRlc3RfeGpoWUVnODU4akYwUjF6YVlRdGRrV1lPRHJtOUhxN1Q4cXlzaWFEWC1QOA==
				Accept=*/*
				Content-Type=application/json
Body:
{
    "amount": {
        "value": "1.00",
        "currency": "RUB"
    },
    "payment_method_data": {
        "type": "bank_card",
        "card": {
            "cardholder": "MR CARDHOLDER",
            "csc": "213",
            "expiry_month": "01",
            "expiry_year": "2020",
            "number": "5555555555554444"
        }
    },
    "confirmation": {
        "type": "redirect",
        "return_url": "https://www.example.com/return_url"
    },
    "description": "Заказ №74"
}
HTTP/1.1 200 
Server: nginx
Date: Thu, 18 Jul 2024 10:28:07 GMT
Content-Type: application/json;charset=UTF-8
Content-Length: 1068
Connection: keep-alive
Keep-Alive: timeout=12
Signature: v1 2e2b01f7 1 MGQCMEGtkgvEjPjOIS3MicTkhLi/k3aA8jpSFwlIVj6OYxNXM4KWusgazkBUyGJU4PqB5AIwTI44yLaS96qFD03RZjapRr9a691nygDaVggAxvHiPiGcWjwOdLRALiMqYQabf8kq
Strict-Transport-Security: max-age=15768000

{
    "id": "2e2b01f6-000f-5000-8000-1e0c9212b422",
    "status": "waiting_for_capture",
    "amount": {
        "value": "1.00",
        "currency": "RUB"
    },
    "description": "Заказ №74",
    "recipient": {
        "account_id": "359240",
        "gateway_id": "2215148"
    },
    "payment_method": {
        "type": "bank_card",
        "id": "2e2b01f6-000f-5000-8000-1e0c9212b422",
        "saved": false,
        "title": "Bank card *4444",
        "card": {
            "first6": "555555",
            "last4": "4444",
            "expiry_year": "2020",
            "expiry_month": "01",
            "card_type": "MasterCard",
            "card_product": {
                "code": "E"
            },
            "issuer_country": "US"
        }
    },
    "created_at": "2024-07-18T10:28:06.025Z",
    "expires_at": "2024-07-25T10:28:07.554Z",
    "test": true,
    "paid": true,
    "refundable": false,
    "metadata": {
        
    },
    "authorization_details": {
        "rrn": "507821553095949",
        "auth_code": "555160",
        "three_d_secure": {
            "applied": false,
            "method_completed": false,
            "challenge_completed": false
        }
    }
}
Request URI:	https://api.yookassa.ru/v3/payments/2e2b01f6-000f-5000-8000-1e0c9212b422/capture
Headers:		Idempotence-Key=2cdd638d-59ff-4f59-bb58-8d93170c6563
				Authorization=Basic MzU5MjQwOnRlc3RfeGpoWUVnODU4akYwUjF6YVlRdGRrV1lPRHJtOUhxN1Q4cXlzaWFEWC1QOA==
				Accept=*/*
				Content-Type=application/json
Body:
{
    "amount": {
        "value": "1.00",
        "currency": "RUB"
    }
}
HTTP/1.1 200 
Server: nginx
Date: Thu, 18 Jul 2024 10:28:12 GMT
Content-Type: application/json;charset=UTF-8
Content-Length: 1204
Connection: keep-alive
Keep-Alive: timeout=12
Signature: v1 2e2b01fc 1 MGQCMHQSUZLqBBi/u66Wjv7mXO4C+CBDFqDlpdWpHpQdJ85pGeVNUlml3E4nseBH+KgA8wIwNtQkMSKtoRnxxC9E0oFWLUMWfd6GEnLjQsivGjyXP0Wjgbi0TCkAlMAY119+zacl
Strict-Transport-Security: max-age=15768000

{
    "id": "2e2b01f6-000f-5000-8000-1e0c9212b422",
    "status": "succeeded",
    "amount": {
        "value": "1.00",
        "currency": "RUB"
    },
    "income_amount": {
        "value": "0.96",
        "currency": "RUB"
    },
    "description": "Заказ №74",
    "recipient": {
        "account_id": "359240",
        "gateway_id": "2215148"
    },
    "payment_method": {
        "type": "bank_card",
        "id": "2e2b01f6-000f-5000-8000-1e0c9212b422",
        "saved": false,
        "title": "Bank card *4444",
        "card": {
            "first6": "555555",
            "last4": "4444",
            "expiry_year": "2020",
            "expiry_month": "01",
            "card_type": "MasterCard",
            "card_product": {
                "code": "E"
            },
            "issuer_country": "US"
        }
    },
    "captured_at": "2024-07-18T10:28:10.069Z",
    "created_at": "2024-07-18T10:28:06.025Z",
    "test": true,
    "refunded_amount": {
        "value": "0.00",
        "currency": "RUB"
    },
    "paid": true,
    "refundable": true,
    "metadata": {
        
    },
    "authorization_details": {
        "rrn": "507821553095949",
        "auth_code": "555160",
        "three_d_secure": {
            "applied": false,
            "method_completed": false,
            "challenge_completed": false
        }
    }
}
Запрашиваем информацию о платеже: 
Request URI:	https://api.yookassa.ru/v3/payments/2e2b01f6-000f-5000-8000-1e0c9212b422
Headers:		Idempotence-Key=2cdd638d-59ff-4f59-bb58-8d93170c6563
				Authorization=Basic MzU5MjQwOnRlc3RfeGpoWUVnODU4akYwUjF6YVlRdGRrV1lPRHJtOUhxN1Q4cXlzaWFEWC1QOA==
				Accept=*/*
				Content-Type=application/json
Body:			<none>
HTTP/1.1 200 
Server: nginx
Date: Thu, 18 Jul 2024 10:28:12 GMT
Content-Type: application/json;charset=UTF-8
Content-Length: 1204
Connection: keep-alive
Keep-Alive: timeout=12
Signature: v1 2e2b01fc 1 MGQCMHOLyVaVjVIYZ4MzkmaC8/eqGaq/jjTdieO+SyDRmw2sx9VJ8LaLtAodfF512uRHzwIwG80AVf2FhemxNxXyLzxpRBbX4gxieZt0ZiRkvKsZvPR7yZm9XXwSsh2wOBG0vqhX
Strict-Transport-Security: max-age=15768000

{
    "id": "2e2b01f6-000f-5000-8000-1e0c9212b422",
    "status": "succeeded",
    "amount": {
        "value": "1.00",
        "currency": "RUB"
    },
    "income_amount": {
        "value": "0.96",
        "currency": "RUB"
    },
    "description": "Заказ №74",
    "recipient": {
        "account_id": "359240",
        "gateway_id": "2215148"
    },
    "payment_method": {
        "type": "bank_card",
        "id": "2e2b01f6-000f-5000-8000-1e0c9212b422",
        "saved": false,
        "title": "Bank card *4444",
        "card": {
            "first6": "555555",
            "last4": "4444",
            "expiry_year": "2020",
            "expiry_month": "01",
            "card_type": "MasterCard",
            "card_product": {
                "code": "E"
            },
            "issuer_country": "US"
        }
    },
    "captured_at": "2024-07-18T10:28:10.069Z",
    "created_at": "2024-07-18T10:28:06.025Z",
    "test": true,
    "refunded_amount": {
        "value": "0.00",
        "currency": "RUB"
    },
    "paid": true,
    "refundable": true,
    "metadata": {
        
    },
    "authorization_details": {
        "rrn": "507821553095949",
        "auth_code": "555160",
        "three_d_secure": {
            "applied": false,
            "method_completed": false,
            "challenge_completed": false
        }
    }
}
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
